{%- comment -%}
  BreadcrumbList JSON-LD schema.
  Renders on product, collection, blog, and article pages.
{%- endcomment -%}

{%- if request.page_type == 'product' or request.page_type == 'collection' or request.page_type == 'blog' or request.page_type == 'article' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ shop.url }}"
    }
    {%- if request.page_type == 'collection' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ collection.title | json }},
      "item": "{{ shop.url }}{{ collection.url }}"
    }
    {%- elsif request.page_type == 'product' -%}
    {%- if product.collections.size > 0 -%}
    {%- assign primary_collection = product.collections | first -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ primary_collection.title | json }},
      "item": "{{ shop.url }}{{ primary_collection.url }}"
    }
    {%- endif -%}
    ,{
      "@type": "ListItem",
      "position": {% if product.collections.size > 0 %}3{% else %}2{% endif %},
      "name": {{ product.title | json }},
      "item": "{{ shop.url }}{{ product.url }}"
    }
    {%- elsif request.page_type == 'blog' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | json }},
      "item": "{{ shop.url }}{{ blog.url }}"
    }
    {%- elsif request.page_type == 'article' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | json }},
      "item": "{{ shop.url }}{{ blog.url }}"
    }
    ,{
      "@type": "ListItem",
      "position": 3,
      "name": {{ article.title | json }},
      "item": "{{ shop.url }}{{ article.url }}"
    }
    {%- endif -%}
  ]
}
</script>
{%- endif -%}
