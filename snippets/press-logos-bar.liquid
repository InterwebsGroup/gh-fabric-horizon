{% comment %}
  Shared "As Seen On" press logos bar.
  Renders the same logo strip everywhere — homepage, PDP, etc.
  Logos are configured in Theme Settings > Giant Hoodies Settings > Press Logos.
  Falls back to file_url references if theme settings aren't set yet.

  Usage:  {% render 'press-logos-bar' %}
{% endcomment %}

{%- liquid
  assign img_loading = loading | default: 'eager'
-%}
{%- capture logo_items -%}
  {%- liquid
    assign logos = 'press_logo_1,press_logo_2,press_logo_3,press_logo_4,press_logo_5,press_logo_6' | split: ','
    assign fallback_files = 'Oprah_Mag.svg,GMA.svg,ABC.svg,Cosmopolitan.svg,Kelly_and_Mark.svg,The_View.svg' | split: ','
    assign fallback_alts = "Oprah's Favorite Things,Good Morning America,Forbes,Cosmopolitan,Kelly & Mark,The View" | split: ','
  -%}
  {%- for logo_key in logos -%}
    {%- assign alt_key = logo_key | append: '_alt' -%}
    {%- assign alt_text = settings[alt_key] | default: fallback_alts[forloop.index0] -%}
    <div class="press-logos__item">
      {%- if settings[logo_key] != blank -%}
        {{ settings[logo_key] | image_url: width: 200 | image_tag: alt: alt_text, class: 'press-logos__img', loading: img_loading }}
      {%- else -%}
        <img src="{{ fallback_files[forloop.index0] | file_url }}" alt="{{ alt_text }}" class="press-logos__img" loading="{{ img_loading }}" width="200" height="80">
      {%- endif -%}
    </div>
  {%- endfor -%}
{%- endcapture -%}

<div class="press-logos">
  <p class="press-logos__label">As Seen On</p>
  <div class="press-logos__grid">
    <div class="press-logos__track">
      {{ logo_items }}
      {{ logo_items }}
    </div>
  </div>
</div>

{% style %}
  .press-logos {
    text-align: center;
    overflow: hidden;
    width: 100%;
  }

  .press-logos__label {
    font-family: var(--gh-font-body, 'DM Sans', sans-serif);
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-foreground);
    opacity: 0.6;
    margin-bottom: 24px;
  }

  .press-logos__grid {
    overflow: hidden;
    width: 100%;
  }

  /* ── Desktop: static centered row ── */
  .press-logos__track {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 40px;
  }

  .press-logos__item {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    height: clamp(34px, 3.2vw, 44px);
  }

  /* Hide the duplicate set on desktop (items 7-12) */
  .press-logos__item:nth-child(n+7) {
    display: none;
  }

  .press-logos__img {
    height: 100%;
    width: auto;
  }

  /* Balance by visual weight — wide wordmarks get shorter containers.
     Slot order: 1 Oprah (81x31), 2 GMA (71x41), 3 ABC (81x34),
                 4 Cosmo (100x19), 5 Kelly&Mark (78x41), 6 The View (80x41) */
  .press-logos__item:nth-child(6n+1),
  .press-logos__item:nth-child(6n+3) {
    height: clamp(30px, 2.8vw, 38px);
  }

  .press-logos__item:nth-child(6n+4) {
    height: clamp(20px, 1.9vw, 26px);
  }

  .press-logos__text {
    font-family: var(--gh-font-body, 'DM Sans', sans-serif);
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-foreground);
    opacity: 0.5;
    white-space: nowrap;
  }

  /* ── Mobile: infinite seamless marquee ── */
  @keyframes press-logos-scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  @media screen and (max-width: 749px) {
    /* Break out of any parent padding for true edge-to-edge scroll */
    .press-logos {
      margin-inline: calc(-1 * var(--page-margin, 16px));
      width: calc(100% + 2 * var(--page-margin, 16px));
    }

    .press-logos__label {
      margin-bottom: 16px;
    }

    /* Show ALL items including duplicates for seamless loop */
    .press-logos__item:nth-child(n+7) {
      display: flex;
    }

    /* Use margin instead of gap so -50% perfectly equals one set of logos */
    .press-logos__track {
      justify-content: flex-start;
      gap: 0;
      width: max-content;
      animation: press-logos-scroll 20s linear infinite;
      will-change: transform;
    }

    .press-logos__item {
      height: 28px;
      margin-right: 32px;
    }

    .press-logos__item:nth-child(6n+1),
    .press-logos__item:nth-child(6n+3) {
      height: 24px;
    }

    .press-logos__item:nth-child(6n+4) {
      height: 16px;
    }

    .press-logos__text {
      font-size: 0.75rem;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .press-logos__track {
      animation-play-state: paused;
    }
  }
{% endstyle %}
